$(document).ready(function(){function r(s){1===s[0]&&1===s[1]&&1===s[2]||1===s[3]&&1===s[4]&&1===s[5]||1===s[6]&&1===s[7]&&1===s[8]||1===s[0]&&1===s[3]&&1===s[6]||1===s[1]&&1===s[4]&&1===s[7]||1===s[2]&&1===s[5]&&1===s[8]||1===s[0]&&1===s[4]&&1===s[8]||1===s[2]&&1===s[4]&&1===s[6]?($(".textResult").html('<img src="images/flowers.png">'),$("td,#pro").unbind()):2===s[0]&&2===s[1]&&2===s[2]||2===s[3]&&2===s[4]&&2===s[5]||2===s[6]&&2===s[7]&&2===s[8]||2===s[0]&&2===s[3]&&2===s[6]||2===s[1]&&2===s[4]&&2===s[7]||2===s[2]&&2===s[5]&&2===s[8]||2===s[0]&&2===s[4]&&2===s[8]||2===s[2]&&2===s[4]&&2===s[6]?($(".textResult").html('<img src="images/smile.png">'),$("td,#pro").unbind()):($(".textResult").html('<img src="images/tie.jpg">'),$("td,#pro").unbind())}function g(s,i){1===s[0]&&1===s[1]&&1===s[2]||1===s[3]&&1===s[4]&&1===s[5]||1===s[6]&&1===s[7]&&1===s[8]||1===s[0]&&1===s[3]&&1===s[6]||1===s[1]&&1===s[4]&&1===s[7]||1===s[2]&&1===s[5]&&1===s[8]||1===s[0]&&1===s[4]&&1===s[8]||1===s[2]&&1===s[4]&&1===s[6]?($(".textResult").html('<img src="images/flowers.png">'),$("td,#pro").unbind()):2===s[0]&&2===s[1]&&2===s[2]||2===s[3]&&2===s[4]&&2===s[5]||2===s[6]&&2===s[7]&&2===s[8]||2===s[0]&&2===s[3]&&2===s[6]||2===s[1]&&2===s[4]&&2===s[7]||2===s[2]&&2===s[5]&&2===s[8]||2===s[0]&&2===s[4]&&2===s[8]||2===s[2]&&2===s[4]&&2===s[6]?($(".textResult").html('<img src="images/smile.png">'),$("td,#pro").unbind()):9===i&&($(".textResult").html('<img src="images/tie.jpg">'),$("td,#pro").unbind())}function e(s){return Math.floor(Math.random()*s)}for(var s=[],i=0;9>i;i++)s[i]=0;var i=0;$(".tic").click(function(){$(".toe").unbind();var r=parseInt(this.id.split("").reverse().join(""));if(1===s[r]||2===s[r])alert("Разве не видно? Тут занято елки-палки! Кликай в другую позицию!");else if(s[r]=1,i++,$(this).html('<img src="images/cross64.png">'),9===i)$(this).html('<img src="images/cross64.png">'),g(s,i);else{for(var m=e(9);1===s[m]||2===s[m];)m=e(9);if(0===s[m]){s[m]=2;var l="#p"+m;$(l).html('<img src="images/circle_green.png">'),i++}g(s,i)}}),$("#play").click(function(){location.reload()}),$("#pro").click(function(){$(".tic").unbind(),s[4]=2,$("#r4").html('<img src="images/cross64.png">'),i++,$(".toe").click(function(){var g=parseInt(this.id.split("").reverse().join(""));1===s[g]||2===s[g]?alert("Разве не видно? Тут занято елки-палки! Кликай в другую позицию!"):(s[g]=1,i++,$(this).html('<img src="images/circle_green.png">'),console.log(s),9===i?($(this).html('<img src="images/circle_green.png">'),r(s,i)):1==s[0]&&0==s[8]?(i++,s[2]=2,$("#r2").html('<img src="images/cross64.png">'),1==s[6]?(i++,s[3]=2,$("#r3").html('<img src="images/cross64.png">'),1==s[5]?(i++,s[1]=2,$("#r1").html('<img src="images/cross64.png">'),1==s[7]?(i++,s[8]=2,$("#r8").html('<img src="images/cross64.png">'),r(s,i)):1==s[8]&&(i++,s[7]=2,$("#r7").html('<img src="images/cross64.png">'),r(s,i))):(1==s[1]||1==s[7]||1==s[8])&&(i++,s[5]=2,$("#r5").html('<img src="images/cross64.png">'),r(s,i))):(1==s[1]||1==s[3]||1==s[5]||1==s[7]||1==s[8])&&(i++,s[6]=2,$("#r6").html('<img src="images/cross64.png">'),r(s,i))):1==s[8]&&0==s[7]||1==s[8]&&2==s[7]?(i++,s[2]=2,$("#r2").html('<img src="images/cross64.png">'),1==s[6]?(i++,s[7]=2,$("#r7").html('<img src="images/cross64.png">'),1!=s[0]&&1!=s[3]&&1!=s[5]||0!=s[1]?1==s[1]&&(i++,s[3]=2,$("#r3").html('<img src="images/cross64.png">'),1==s[0]?(i++,s[5]=2,$("#r5").html('<img src="images/cross64.png">'),r(s,i)):1==s[5]&&(i++,s[0]=2,$("#r0").html('<img src="images/cross64.png">'),r(s,i))):(i++,s[1]=2,$("#r1").html('<img src="images/cross64.png">'),r(s,i),console.log(s))):(1==s[1]||1==s[3]||1==s[5]||1==s[7]||1==s[0])&&(i++,s[6]=2,$("#r6").html('<img src="images/cross64.png">'),r(s,i))):1==s[2]&&0==s[6]?(i++,s[8]=2,$("#r8").html('<img src="images/cross64.png">'),console.log(i),console.log(s),1==s[0]&&1==s[2]?(i++,s[1]=2,$("#r1").html('<img src="images/cross64.png">'),console.log(i),console.log(s),1!=s[3]&&1!=s[5]&&1!=s[6]||0!=s[7]?1==s[7]&&(i++,s[3]=2,$("#r3").html('<img src="images/cross64.png">'),1==s[6]?(i++,s[5]=2,$("#r5").html('<img src="images/cross64.png">'),r(s,i)):1==s[5]&&(i++,s[6]=2,$("#r6").html('<img src="images/cross64.png">'),r(s,i))):(i++,s[7]=2,$("#r7").html('<img src="images/cross64.png">'),r(s,i),console.log(i),console.log(s))):(1==s[1]||1==s[3]||1==s[5]||1==s[7]||1==s[6])&&(i++,s[0]=2,$("#r0").html('<img src="images/cross64.png">'),r(s,i))):1==s[6]&&0==s[3]||1==s[6]&&2==s[3]?(i++,s[8]=2,$("#r8").html('<img src="images/cross64.png">'),console.log(i),console.log(s),1==s[0]?(i++,s[3]=2,$("#r3").html('<img src="images/cross64.png">'),console.log(i),console.log(s),1!=s[1]&&1!=s[2]&&1!=s[7]||1!=s[0]||0!=s[7]?1==s[5]&&(i++,s[1]=2,$("#r1").html('<img src="images/cross64.png">'),1==s[2]?(i++,s[7]=2,$("#r7").html('<img src="images/cross64.png">'),r(s,i)):1==s[7]&&(i++,s[2]=2,$("#r2").html('<img src="images/cross64.png">'),r(s,i))):(i++,s[5]=2,$("#r5").html('<img src="images/cross64.png">'),r(s,i),console.log(i),console.log(s))):(1==s[1]||1==s[2]||1==s[3]||1==s[5]||1==s[7])&&(i++,s[0]=2,$("#r0").html('<img src="images/cross64.png">'),r(s,i))):1==s[1]&&0==s[7]?(i++,s[6]=2,$("#r6").html('<img src="images/cross64.png">'),1==s[2]?(i++,s[0]=2,$("#r0").html('<img src="images/cross64.png">'),alert("В любом случае проигрыш, прости"),s[3]=2,$("#r3").html('<img src="images/cross64.png">'),r(s,i)):(1==s[0]||1==s[3]||1==s[5]||1==s[7]||1==s[8])&&(i++,s[2]=2,$("#r2").html('<img src="images/cross64.png">'),r(s,i))):1==s[3]&&0==s[5]?(i++,s[2]=2,$("#r2").html('<img src="images/cross64.png">'),1==s[6]?(i++,s[0]=2,$("#r0").html('<img src="images/cross64.png">'),alert("В любом случае проигрыш, прости"),s[1]=2,$("#r1").html('<img src="images/cross64.png">'),r(s,i)):(1==s[0]||1==s[1]||1==s[5]||1==s[7]||1==s[8])&&(i++,s[6]=2,$("#r6").html('<img src="images/cross64.png">'),r(s,i))):1==s[7]&&0==s[1]?(i++,s[0]=2,$("#r0").html('<img src="images/cross64.png">'),1==s[8]?(i++,s[6]=2,$("#r6").html('<img src="images/cross64.png">'),alert("В любом случае проигрыш, прости"),s[3]=2,$("#r3").html('<img src="images/cross64.png">'),r(s,i)):(1==s[1]||1==s[2]||1==s[3]||1==s[5]||1==s[6])&&(i++,s[8]=2,$("#r8").html('<img src="images/cross64.png">'),r(s,i))):1==s[5]&&0==s[3]&&(i++,s[6]=2,$("#r6").html('<img src="images/cross64.png">'),1==s[2]?(i++,s[8]=2,$("#r8").html('<img src="images/cross64.png">'),alert("В любом случае проигрыш, прости"),s[7]=2,$("#r7").html('<img src="images/cross64.png">'),r(s,i)):(1==s[0]||1==s[1]||1==s[3]||1==s[7]||1==s[8])&&(i++,s[2]=2,$("#r2").html('<img src="images/cross64.png">'),r(s,i))))})})});